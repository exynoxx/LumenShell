/*  public interface Transition {
    public abstract bool finished { get; }
    public abstract void update(double dt);
    public abstract void draw();
}

public class MoveTransition : Transition {
    public double x, y;
    public double start_x, start_y;
    public double end_x, end_y;
    public double duration;
    private double t = 0.0;

    public bool finished { get; private set; }

    public MoveTransition(double start_x, double start_y,
                          double end_x,   double end_y,
                          double duration) {
        this.x = this.start_x = start_x;
        this.y = this.start_y = start_y;
        this.end_x = end_x;
        this.end_y = end_y;
        this.duration = duration;
    }

    public void update(double dt) {
        if (finished) return;

        t += dt;
        double k = Math.min(t / duration, 1.0);

        // simple linear interpolation
        x = start_x + (end_x - start_x) * k;
        y = start_y + (end_y - start_y) * k;

        if (k >= 1.0)
            finished = true;
    }

    public void draw() {
        // Replace with your renderer:
        //draw_rect(x, y, 100, 100);
    }
}

public class AnimationManager {
    private List<Transition> transitions = new List<Transition>();

    public void add(Transition t) {
        transitions.add(t);
    }

    public void update(double dt) {
        foreach (var t in transitions.copy())
            t.update(dt);

        // Remove finished transitions
        transitions = transitions.filter((t) => !t.finished);
    }

    public void draw() {
        foreach (var t in transitions)
            t.draw();
    }
}

/*  double last_time = now();

void render_frame() {
    double current = now();
    double dt = current - last_time;
    last_time = current;

    ctx.begin_frame();

    animation_manager.update(dt);
    animation_manager.draw();

    ctx.end_frame();
}

animation_manager.add(
    new MoveTransition(0, 0, 400, 0, 0.5)
);

*/  */